import{_ as Q,v as W,r as h,a as w,x as X,y as Y,q as Z,d as r,z as ee,c as te,o as k,g as m,b as t,i as d,w as a,m as B,p as ae,t as M,f as le,A as oe,B as ne,C as se,D as u,G as re}from"./index-9h7Yp_oU.js";const ie={class:"page-container"},de={class:"page-header"},ue={class:"page-title"},ce={class:"header-actions"},pe={class:"search-filter"},me={class:"page-content"},_e={class:"pagination"},fe={class:"dialog-footer"},ge={__name:"GenericPage",props:{pageMeta:{type:Object,default:()=>({title:"页面标题",icon:"Document"})},dataType:{type:String,required:!0,validator:function(_){return["user","role","permission","brand","attr","spu","sku"].includes(_)}}},setup(_){const f=_,g=W(),C=h(!1),v=w({keyword:""}),D=h([]),s=w({current:1,size:10,total:0}),c=h(!1),n=w({id:null,name:"",status:!0}),U={name:[{required:!0,message:"请输入名称",trigger:"blur"}]},V=h(null),j=X(()=>n.id?"编辑":"新增"),i=async()=>{C.value=!0;try{const o=g.getPaginatedData(f.dataType,s,v);D.value=o.data,s.total=o.total}catch(o){u.error("加载数据失败"),console.error("Load data error:",o)}finally{C.value=!1}},z=()=>{s.current=1,i()},E=()=>{v.keyword="",s.current=1,i()},G=()=>{Object.assign(n,{id:null,name:"",status:!0}),c.value=!0},P=o=>{Object.assign(n,{...o}),c.value=!0},q=o=>{re.confirm("确定删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{g.deleteData(f.dataType,o.id)?(u.success("删除成功"),i()):u.error("删除失败")}catch(e){u.error("删除失败"),console.error("Delete error:",e)}}).catch(()=>{})},N=()=>{V.value.validate(async o=>{if(o)try{n.id?g.updateData(f.dataType,n.id,{name:n.name,status:n.status})?(u.success("更新成功"),c.value=!1,i()):u.error("更新失败"):g.createData(f.dataType,{name:n.name,status:n.status})?(u.success("创建成功"),c.value=!1,i()):u.error("创建失败")}catch(e){u.error("操作失败"),console.error("Submit error:",e)}})},O=o=>{s.size=o,s.current=1,i()},R=o=>{s.current=o,i()};return Y(()=>f.dataType,()=>{i()}),Z(()=>{g.initData(),i()}),(o,e)=>{const x=r("el-icon"),p=r("el-button"),T=r("el-input"),b=r("el-form-item"),S=r("el-form"),y=r("el-table-column"),$=r("el-tag"),F=r("el-table"),I=r("el-pagination"),K=r("el-card"),A=r("el-switch"),L=r("el-dialog"),H=ee("loading");return k(),te("div",ie,[m("div",de,[m("h1",ue,[t(x,{size:24,class:"title-icon"},{default:a(()=>[(k(),B(ae(_.pageMeta.icon)))]),_:1}),d(" "+M(_.pageMeta.title),1)]),m("div",ce,[t(p,{type:"primary",onClick:G},{default:a(()=>[t(x,null,{default:a(()=>[t(le(oe))]),_:1}),e[7]||(e[7]=d(" 新增 "))]),_:1,__:[7]})])]),m("div",pe,[t(S,{inline:!0,model:v},{default:a(()=>[t(b,{label:"关键词"},{default:a(()=>[t(T,{modelValue:v.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>v.keyword=l),placeholder:"请输入关键词",clearable:"",onKeyup:ne(z,["enter"])},null,8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(p,{type:"primary",onClick:z},{default:a(()=>e[8]||(e[8]=[d("搜索")])),_:1,__:[8]}),t(p,{onClick:E},{default:a(()=>e[9]||(e[9]=[d("重置")])),_:1,__:[9]})]),_:1})]),_:1},8,["model"])]),m("div",me,[t(K,{shadow:"never"},{default:a(()=>[se((k(),B(F,{data:D.value,border:"",stripe:"",style:{width:"100%"}},{default:a(()=>[t(y,{prop:"id",label:"ID",width:"80",align:"center"}),t(y,{prop:"name",label:"名称","min-width":"120"}),t(y,{prop:"status",label:"状态",width:"100"},{default:a(({row:l})=>[t($,{type:l.status?"success":"danger"},{default:a(()=>[d(M(l.status?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(y,{prop:"createTime",label:"创建时间",width:"180"}),t(y,{label:"操作",width:"180",fixed:"right",align:"center"},{default:a(({row:l})=>[t(p,{size:"small",onClick:J=>P(l)},{default:a(()=>e[10]||(e[10]=[d("编辑")])),_:2,__:[10]},1032,["onClick"]),t(p,{size:"small",type:"danger",onClick:J=>q(l)},{default:a(()=>e[11]||(e[11]=[d(" 删除 ")])),_:2,__:[11]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,C.value]]),m("div",_e,[t(I,{"current-page":s.current,"onUpdate:currentPage":e[1]||(e[1]=l=>s.current=l),"page-size":s.size,"onUpdate:pageSize":e[2]||(e[2]=l=>s.size=l),total:s.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:O,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),_:1})]),t(L,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=l=>c.value=l),title:j.value,width:"50%"},{footer:a(()=>[m("span",fe,[t(p,{onClick:e[5]||(e[5]=l=>c.value=!1)},{default:a(()=>e[12]||(e[12]=[d("取消")])),_:1,__:[12]}),t(p,{type:"primary",onClick:N},{default:a(()=>e[13]||(e[13]=[d("确定")])),_:1,__:[13]})])]),default:a(()=>[t(S,{model:n,rules:U,"label-width":"100px",ref_key:"formRef",ref:V},{default:a(()=>[t(b,{label:"名称",prop:"name"},{default:a(()=>[t(T,{modelValue:n.name,"onUpdate:modelValue":e[3]||(e[3]=l=>n.name=l),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(b,{label:"状态",prop:"status"},{default:a(()=>[t(A,{modelValue:n.status,"onUpdate:modelValue":e[4]||(e[4]=l=>n.status=l),"active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ye=Q(ge,[["__scopeId","data-v-c2d2c8ae"]]);export{ye as G};
